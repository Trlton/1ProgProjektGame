import pygame
from pygame.math import Vector2
import constants as game_constants

class gameObject:
    xSpeed = 0
    ySpeed = 0
    widthHitbox = 0
    heightHitbox = 0
    maxHealth = 0
    currentHealth = 0



class player(gameObject):
    def __init__(self, screen, xpos, ypos, width, height):
        super().__init__()
        self.rect = pygame.Rect(xpos, ypos, width, height)
        self.pos = Vector2(xpos, ypos)
        self.vel = Vector2(0, 0)
        self.acc = Vector2(0, 0)
        self.currentHealth = game_constants.playerMaxHealth
        self.screen = screen
        self.image = pygame.image.load(game_constants.playerPNG).convert_alpha()

    def updatePlayer(self):
        self.acc = Vector2(0, 0)

        # Check input and set acceleration via vector
        keys = pygame.key.get_pressed()
        if keys[game_constants.leftBinding]:
            self.acc.x = -1
        if keys[game_constants.rightBinding]:
            self.acc.x = 1
        if keys[game_constants.upBinding]:
            self.acc.y = -1
        if keys[game_constants.downBinding]:
            self.acc.y = 1

        if self.acc.length_squared() > 0:
            self.acc = self.acc.normalize()

        self.acc *= game_constants.playerMaxSpeed
        self.pos += self.acc

        # Update player position
        self.rect.center = self.pos


    def draw(self, screen, hitboxColor, camera):
        adjusted_rect = self.rect.move(camera.camera.topleft)
        screen.blit(self.image, adjusted_rect)
